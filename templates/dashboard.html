<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบตรวจจับคำซ้ำ - Duplicate Word Detector</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link href="/static/style.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <i class="fas fa-search me-2"></i>
                ระบบตรวจจับคำซ้ำ
            </a>
            <span class="navbar-text text-white d-none d-md-block">
                <small>Duplicate Word Detector</small>
            </span>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-container">
        <div class="content-grid">
            <!-- Sidebar -->
            <div class="sidebar-section">
                <!-- Action Buttons Card -->
                <div class="card mb-3 border-primary">
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <!-- Secondary Actions -->
                            <div class="row g-2 mb-1">
                                <div class="col-6">
                                    <button class="btn btn-outline-secondary w-100" id="resetBtn">
                                        <i class="fas fa-redo me-1"></i>
                                        <span class="d-none d-md-inline">เริ่มใหม่</span>
                                        <span class="d-md-none">รีเซ็ต</span>
                                    </button>
                                </div>
                                <div class="col-6">
                                    <button class="btn btn-outline-info w-100" id="clearBtn">
                                        <i class="fas fa-eraser me-1"></i>
                                        <span class="d-none d-md-inline">ล้างข้อความ</span>
                                        <span class="d-md-none">ล้าง</span>
                                    </button>
                                </div>
                            </div>
                            <!-- Primary Action -->
                            <button class="btn btn-primary btn-lg shadow" id="analyzeBtn">
                                <i class="fas fa-search me-2"></i>
                                ตรวจสอบคำซ้ำ
                            </button>
                        </div>
                    </div>
                </div>

                <!-- File Upload Card -->
                <div class="card mb-3">
                    <div class="card-header bg-gradient-primary text-white">
                        <h6 class="mb-0">
                            <i class="fas fa-upload me-2"></i>
                            1. อัปโหลดไฟล์
                        </h6>
                    </div>
                    <div class="card-body">
                        <input type="file" class="form-control" id="fileInput" accept=".txt,.text,.pdf">
                        <div class="form-text mt-2">
                            <i class="fas fa-file-pdf me-1"></i>
                            รองรับ .txt และ .pdf (ไม่เกิน 10MB)
                        </div>
                        <div class="mt-2">
                            <small class="text-info">
                                <i class="fas fa-magic me-1"></i>
                                รองรับ PDF ทั้งข้อความและภาพ (OCR อัตโนมัติ)
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Input Card -->
                <div class="card mb-3">
                    <div class="card-header bg-light">
                        <h6 class="mb-0 text-dark">
                            <i class="fas fa-edit me-2"></i>
                            หรือพิมพ์ข้อความ
                        </h6>
                    </div>
                    <div class="card-body">
                        <textarea 
                            class="form-control" 
                            id="textInput" 
                            rows="5" 
                            placeholder="พิมพ์หรือวางข้อความที่ต้องการตรวจสอบคำซ้ำที่นี่..."
                            style="resize: vertical; min-height: 100px;"></textarea>
                        <div class="mt-2">
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                รองรับภาษาไทยและอังกฤษ
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div id="progressContainer" class="card mb-3" style="display: none;">
                    <div class="card-body">
                        <div class="text-center mb-2">
                            <small class="text-muted fw-bold" id="progressMessage">
                                <i class="fas fa-spinner fa-spin me-1"></i>
                                กำลังประมวลผล...
                            </small>
                        </div>
                        <div class="progress" style="height: 10px;">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" 
                                 id="progressBar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <div class="text-center mt-2">
                            <small class="text-primary fw-bold" id="progressPercent">0%</small>
                        </div>
                    </div>
                </div>

                <!-- Quick Tips Card -->
                <div class="card border-info">
                    <div class="card-body">
                        <h6 class="text-info mb-2">
                            <i class="fas fa-lightbulb me-2"></i>
                            เคล็ดลับการใช้งาน
                        </h6>
                        <ul class="small text-muted mb-0 ps-3">
                            <li>กด Ctrl+V เพื่อวางข้อความ</li>
                            <li>รองรับข้อความยาวได้</li>
                            <li>ส่งออกผลเป็น CSV ได้</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content-section">
                <!-- Welcome Section -->
                <div id="welcomeSection" class="card mb-4">
                    <div class="card-body text-center py-5">
                        <div class="mb-4">
                            <i class="fas fa-search fa-4x text-primary mb-3"></i>
                            <h3 class="text-primary fw-bold">ระบบตรวจจับคำซ้ำอัตโนมัติ</h3>
                            <p class="text-muted fs-5">วิเคราะห์ความถี่ของคำในข้อความและแสดงผลลัพธ์อย่างละเอียด</p>
                        </div>
                        <div class="row g-3 mt-4">
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-language fa-2x text-primary mb-2"></i>
                                    <h6>รองรับหลายภาษา</h6>
                                    <small class="text-muted">ภาษาไทยและอังกฤษ</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-chart-bar fa-2x text-success mb-2"></i>
                                    <h6>กราฟแสดงผล</h6>
                                    <small class="text-muted">แสดงความถี่ด้วยกราฟแท่ง</small>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-item">
                                    <i class="fas fa-file-download fa-2x text-info mb-2"></i>
                                    <h6>ส่งออกผลลัพธ์</h6>
                                    <small class="text-muted">ดาวน์โหลดเป็นไฟล์ CSV</small>
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <small class="text-muted">
                                <i class="fas fa-info-circle me-1"></i>
                                เริ่มต้นโดยพิมพ์ข้อความหรืออัปโหลดไฟล์ที่ด้านซ้าย
                            </small>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="resultsSection" style="display: none;">

                    <!-- Quick Stats Summary -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="card stat-card-large bg-primary text-white shadow-sm">
                                <div class="card-body text-center">
                                    <i class="fas fa-font fa-2x mb-2 opacity-75"></i>
                                    <div class="stat-number-large" id="totalWordsStat">0</div>
                                    <div class="stat-label-large">คำทั้งหมด</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card stat-card-large bg-success text-white shadow-sm">
                                <div class="card-body text-center">
                                    <i class="fas fa-check-circle fa-2x mb-2 opacity-75"></i>
                                    <div class="stat-number-large" id="uniqueWordsStat">0</div>
                                    <div class="stat-label-large">คำที่ไม่ซ้ำ</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Bar -->
                    <div class="card mb-4 border-0 shadow-sm">
                        <div class="card-body py-2">
                            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
                                <div class="d-flex align-items-center gap-2">
                                    <span class="badge bg-info">
                                        <i class="fas fa-check me-1"></i>
                                        วิเคราะห์เสร็จสิ้น
                                    </span>
                                    <small class="text-muted d-none d-md-inline">
                                        <i class="fas fa-clock me-1"></i>
                                        เลื่อนลงเพื่อดูรายละเอียด
                                    </small>
                                </div>
                                <button class="btn btn-sm btn-outline-primary" id="exportDuplicatesBtn">
                                    <i class="fas fa-download me-1"></i>
                                    ดาวน์โหลด CSV
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Section -->
                    <div class="card mb-4 shadow-sm">
                        <div class="card-header bg-gradient-success text-white">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center align-items-start gap-2">
                                <h5 class="mb-0">
                                    <i class="fas fa-chart-bar me-2"></i>
                                    <span id="chartTitle">กราฟความถี่ของคำ (Top 10)</span>
                                </h5>
                                <button class="btn btn-outline-light btn-sm" id="toggleChartBtn">
                                    <i class="fas fa-expand me-1"></i>
                                    แสดงทั้งหมด
                                </button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="frequencyChart"></canvas>
                            </div>
                            <div class="mt-3 text-center">
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    แสดงคำ <span id="chartWordCount">0</span> คำ จากทั้งหมด <span id="totalWordCount">0</span> คำ
                                </small>
                            </div>
                        </div>
                    </div>

                    <!-- Word Categories Section -->
                    <div class="card mb-4 shadow-sm">
                        <div class="card-header bg-gradient-info text-white">
                            <h5 class="mb-0">
                                <i class="fas fa-folder-open me-2"></i>
                                หมวดหมู่คำที่พบ (สำหรับงานรัฐสภา)
                            </h5>
                        </div>
                        <div class="card-body">
                            <div id="categorySummary" class="mb-4">
                                <!-- Category chips will be inserted here -->
                            </div>
                            <div class="accordion" id="categoryAccordion">
                                <!-- Category details will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <!-- All Duplicates Section -->
                    <div class="card mb-4 shadow-sm">
                        <div class="card-header bg-gradient-warning text-white">
                            <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center align-items-start gap-2">
                                <h5 class="mb-0">
                                    <i class="fas fa-table me-2"></i>
                                    รายการคำทั้งหมดเรียงตามความถี่
                                </h5>
                                <div class="d-flex align-items-center gap-2">
                                    <label for="itemsPerPage" class="form-label me-1 mb-0 text-white small d-none d-sm-inline">แสดง:</label>
                                    <select class="form-select form-select-sm" id="itemsPerPage" style="width: auto; min-width: 90px;">
                                        <option value="10">10</option>
                                        <option value="25" selected>25</option>
                                        <option value="50">50</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="duplicatesTable">
                                    <thead>
                                        <tr>
                                            <th width="10%">อันดับ</th>
                                            <th width="40%">คำ</th>
                                            <th width="25%">ความถี่</th>
                                            <th width="25%">เปอร์เซ็นต์</th>
                                        </tr>
                                    </thead>
                                    <tbody id="duplicatesTableBody">
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Pagination Controls -->
                            <div class="d-flex justify-content-between align-items-center mt-3">
                                <span id="paginationInfo" class="text-muted"></span>
                                <nav aria-label="Page navigation">
                                    <ul class="pagination pagination-sm mb-0" id="paginationControls">
                                        <!-- Pagination buttons will be generated here -->
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Alert Container -->
    <div id="alertContainer" class="position-fixed top-0 end-0 p-3" style="z-index: 1050;">
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="/static/script.js"></script>
</body>
</html>


